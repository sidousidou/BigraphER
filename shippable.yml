build_image: shipimg/ubuntu1404_base

archive: true

cache: true

language: java

notifications:
 email: false
 
before_install:
 - sudo rm /var/lib/apt/lists/* -vf
 - sudo add-apt-repository -y ppa:avsm/ocaml42+opam12
 - sudo apt-get update -qq 
 - sudo apt-get install -qq ocaml ocaml-native-compilers m4 camlp4-extra opam graphviz zlib1g-dev minisat
 - ./scripts/shippable-opam.sh

before_script:
 - rm -r shippable
 - mkdir -p shippable/codecoverage
 - mkdir -p shippable/testresults
 - mkdir -p shippable/linktest

script:
 - ./scripts/shippable-build.sh
 - ./scripts/shippable-tests.sh 
 - ./scripts/shippable-link.sh
