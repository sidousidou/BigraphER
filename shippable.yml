language: none

env:
  - OCAML_VERSION=4.02.3
  - OCAML_VERSION=4.03.0
  - OCAML_VERSION=4.04.2
  - OCAML_VERSION=4.05.0
  - OCAML_VERSION=4.06.0
  - OCAML_VERSION=4.06.0_flambda

build:
  pre_ci_boot:
      image_name: ocaml/opam
      image_tag: ubuntu-17.04_ocaml-$OCAML_VERSION
      pull: true

  ci:
    - sudo apt-get -qy update && sudo apt-get -qy upgrade && sudo apt-get install zlib1g-dev minisat
    - opam update -y -u
    - opam repository add glasgow "http://www.dcs.gla.ac.uk/~michele/dcs-opam-repository/"
    - opam install -y minisat jbuilder
    - mkdir -p shippable/testresults
    - make test

integrations:
  notifications:
    - integrationName: email
      type: email
      recipients:
        - Michele.Sevegnani@glasgow.ac.uk
      on_success: change
      on_failure: always
